# Data Model: Auth & Onboarding System

## Entities

### User (from Better Auth)
- **id**: String (Primary Key, generated by Better Auth)
- **email**: String (Unique, required, validated)
- **password**: String (Hashed, required)
- **createdAt**: DateTime (Timestamp when account was created)
- **updatedAt**: DateTime (Timestamp when account was last updated)
- **emailVerified**: Boolean (Whether email has been verified)

### UserProfile
- **id**: String (Primary Key, matches Better Auth user ID)
- **userId**: String (Foreign Key to Better Auth User, unique)
- **softwareLevel**: String (Enum: "BEGINNER" | "INTERMEDIATE" | "ADVANCED", required)
- **knownLanguages**: Array[String] (Array of programming languages: "Python", "JavaScript", "C++", "Other", required)
- **hardwareExperience**: String (Enum: "NONE" | "BASIC" | "INTERMEDIATE" | "ADVANCED", required)
- **boardsUsed**: Array[String] (Array of hardware boards: "Arduino", "ESP32", "Raspberry Pi", optional)
- **learningTrack**: String (Enum: "SOFTWARE_ONLY" | "HARDWARE_ONLY" | "FULL_ROBOTICS", required)
- **createdAt**: DateTime (Timestamp when profile was created)
- **updatedAt**: DateTime (Timestamp when profile was last updated)

### AuthSession (from Better Auth)
- **id**: String (Primary Key, generated by Better Auth)
- **userId**: String (Foreign Key to Better Auth User)
- **expiresAt**: DateTime (Expiration timestamp)
- **createdAt**: DateTime (Timestamp when session was created)
- **updatedAt**: DateTime (Timestamp when session was last updated)

## Relationships

### User → UserProfile (One-to-One)
- A User has exactly one UserProfile
- UserProfile.userId references User.id
- UserProfile is created when user completes onboarding
- UserProfile is required for personalized content access

### User → AuthSession (One-to-Many)
- A User can have multiple active AuthSessions
- AuthSession.userId references User.id
- Sessions are managed by Better Auth
- Multiple sessions support multi-device usage

## Validation Rules

### UserProfile Validation
- softwareLevel must be one of: "BEGINNER", "INTERMEDIATE", "ADVANCED"
- knownLanguages array must contain at least one valid language
- hardwareExperience must be one of: "NONE", "BASIC", "INTERMEDIATE", "ADVANCED"
- boardsUsed array items must be one of: "Arduino", "ESP32", "Raspberry Pi" (optional field)
- learningTrack must be one of: "SOFTWARE_ONLY", "HARDWARE_ONLY", "FULL_ROBOTICS"
- createdAt and updatedAt must be valid ISO 8601 timestamps
- userId must reference an existing Better Auth User

### User Validation (via Better Auth)
- email must be a valid email format
- password must meet security requirements (minimum length, complexity)
- email must be unique across all users
- createdAt and updatedAt must be valid ISO 8601 timestamps

## State Transitions

### Profile Completion State
- **Incomplete Profile**: User exists but UserProfile does not exist
  - Trigger: User authentication with no profile
  - Action: Redirect to onboarding flow
- **Complete Profile**: User exists with complete UserProfile
  - Trigger: Profile creation/update completion
  - Action: Allow access to personalized content

### Learning Track States
- **SOFTWARE_ONLY**: Content filtering hides hardware/AI-ML content
- **HARDWARE_ONLY**: Content filtering hides software/AI-ML content
- **FULL_ROBOTICS**: All content available with ROS/control systems unlocked

### Skill Level States
- **BEGINNER**: Content sequencing shows foundations first
- **INTERMEDIATE**: Content builds on foundational knowledge
- **ADVANCED**: Content assumes prior knowledge
