# Data Model: Better Auth Integration for Docusaurus Platform

## User Entity

**Description**: Core user identity managed by Better Auth

**Fields**:
- `id` (string): Unique user identifier generated by Better Auth
- `email` (string): User's email address (unique, required)
- `createdAt` (Date): Account creation timestamp
- `updatedAt` (Date): Last modification timestamp
- `emailVerified` (boolean): Email verification status

## UserMetadata Entity

**Description**: User background information collected during onboarding

**Fields**:
- `softwareBackground` (string): User's software development experience and known languages
- `hardwareExperience` (string): User's hardware/robotics experience and boards used
- `learningTrack` (string): User's preferred learning path (SOFTWARE_ONLY | HARDWARE_ONLY | FULL_ROBOTICS)
- `skillLevel` (string): User's skill level (BEGINNER | INTERMEDIATE | ADVANCED)

**Relationships**:
- One-to-One with User entity (stored as metadata in Better Auth)

## AuthSession Entity

**Description**: Session information managed by Better Auth with cookie-based persistence

**Fields**:
- `sessionId` (string): Unique session identifier
- `userId` (string): Reference to User entity
- `expiresAt` (Date): Session expiration timestamp
- `createdAt` (Date): Session creation timestamp
- `ipAddress` (string): IP address of session origin (for security)
- `userAgent` (string): Browser/device information (for security)

## ProtectedRoute Entity

**Description**: Configuration for routes requiring authentication

**Fields**:
- `path` (string): Route path pattern (e.g., "/dashboard", "/docs/advanced/*")
- `name` (string): Human-readable route name
- `description` (string): Purpose of the protected route
- `redirectPath` (string): Where to redirect unauthenticated users

## DashboardContent Entity

**Description**: Personalized content displayed on user dashboard

**Fields**:
- `userId` (string): Reference to User entity
- `welcomeMessage` (string): Personalized welcome message
- `backgroundDisplay` (string): Formatted user background information
- `recommendedModules` (array): List of recommended learning modules based on profile
- `lastAccessed` (Date): Timestamp of last dashboard access

## FormSubmission Entity

**Description**: Temporary data for onboarding form processing

**Fields**:
- `userId` (string): Reference to User entity
- `formData` (object): Raw form data submitted during onboarding
- `status` (string): Processing status (PENDING | COMPLETED | FAILED)
- `submittedAt` (Date): Timestamp of form submission
- `processedAt` (Date): Timestamp when processing completed

## Validation Rules

### User Entity
- Email must be valid email format
- Email must be unique across all users
- Required fields must not be empty

### UserMetadata Entity
- softwareBackground and hardwareExperience must be strings
- learningTrack must be one of: SOFTWARE_ONLY, HARDWARE_ONLY, FULL_ROBOTICS
- skillLevel must be one of: BEGINNER, INTERMEDIATE, ADVANCED

### AuthSession Entity
- Session must not be expired when accessed
- Session must correspond to valid user account

## State Transitions

### User Registration Flow
1. User enters credentials → Account Created (pending metadata)
2. User completes onboarding → Metadata Added → Account Active
3. User signs in → Session Created → Authenticated State

### Authentication Flow
1. Guest → Unauthenticated State
2. Successful sign-in → Authenticated State → Session Active
3. Session expires/logout → Unauthenticated State

### Profile Completion
1. New user → Incomplete Profile
2. Onboarding completed → Complete Profile
3. Profile updated → Updated Profile
